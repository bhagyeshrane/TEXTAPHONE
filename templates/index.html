<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='indexstyle.css') }}">
    <meta charset="UTF-8">
    <title>My Chat App</title>
</head>
<body>
<h1>My Chat App</h1>
<h3>Hi {% if current_user.is_authenticated %}{{ current_user.username }}{% else %}Guest{% endif %}!</h3>

{% if current_user.is_authenticated %}
    <h3>My rooms</h3>
    <ul>
        {% for room in rooms %}
            <form method="get" action="/rooms/{{ room._id.room_id }}">
                <button id="button" name="{{ room.room_name }}" type="submit">{{ room.room_name }}</button>
            </form>
        {% endfor %}
    </ul>

    <div class="grid-container">
        <div class="decrement"><button id="decrement" onclick="decrementroom()">previous</button></div>
        <div class="increment"><button id="increment" onclick="incrementroom()">next</button></div>
        <div class="enterroom"><button id="enterroom"onclick="enter()">Enter</button>
        </div>
    </div>
    

{% endif %}

<script>
    var buttons = document.querySelectorAll( "button[id^='button']" );
    var counter=-1;
    var buttonname;
    function incrementroom() 
    {   counter++;
        if(counter==buttons.length)
            {
            counter=-1;
            buttonname=0;
            incrementroom();
            }
        else if(counter>=0){
            buttonname=buttons[counter];
            console.log(buttonname);
            var msg1 = new SpeechSynthesisUtterance(buttonname.name);
            window.speechSynthesis.speak(msg1);
        }
        console.log("counter :" + counter);
    }

    function decrementroom() 
    {   
        if(counter==0)
            {
            counter=buttons.length;
            decrementroom();
            }
        else if(counter>0){
            counter=counter-1;
            buttonname=buttons[counter];
            console.log(buttonname);
            var msg1 = new SpeechSynthesisUtterance(buttonname.name);
            window.speechSynthesis.speak(msg1);
            }
            console.log("counter :" + counter);
    }


    function enter()
    {
        buttonname.click();
    }
       
</script>


</body>
</html>